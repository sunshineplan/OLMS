<!doctype html>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<title>OLMS</title>
<link rel='icon' href='/static/favicon.ico'>
<script src='https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js'></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9/dist/sweetalert2.all.min.js"></script>
<script src='/static/script.js'></script>
<script src='/static/olms.js'></script>
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css'>
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/spinkit@2/spinkit.min.css'>
<link rel='stylesheet' href='/static/style.css'>
<nav class='navbar navbar-light topbar'>
  <div class='d-flex' style='height: 100%;'>
    {{ if .user }}
    <a class='toggle'><i class='material-icons menu'>menu</i></a>
    {{ end }}
    <a class='brand' href='/'>Overtime and Leave Management System</a>
  </div>
  <div class='navbar-nav flex-row'>
    {{ if .user }}
    <a class='nav-link'>{{ .user.Realname }}</a>
    <a class='nav-link link' onclick='setting()'>Setting</a>
    <a class='nav-link link' href='/auth/logout'>Logout</a>
    {{ else }}
    <a class='nav-link'>Login</a></li>
    {{ end }}
  </div>
</nav>
{{ if .user }}
<nav class='nav flex-column navbar-light sidebar'>
  <div class='menu'>
    {{ if ne .user.ID 0 }}
    <div>
      <a class='navbar-brand'>Employee Panel</a>
      <ul class='navbar-nav'>
        <li><a class='nav-link' onclick="show('records')">Employee Records</a></li>
        <li><a class='nav-link' onclick="show('stats')">Employee Statistics</a></li>
      </ul>
    </div>
    {{ end }}
    {{ if eq .user.Role true }}
    <div>
      <a class='navbar-brand'>Department Panel</a>
      <ul class='navbar-nav'>
        {{ if ne .user.ID 0 }}
        <li><a class='nav-link' onclick="showAdmin('records')">Department Records</a></li>
        {{ end }}
        <li><a class='nav-link' onclick="showAdmin('stats')">Department Statistics</a></li>
      </ul>
    </div>
    <div>
      <a class='navbar-brand'>Control Panel</a>
      <ul class='navbar-nav'>
        <li><a class='nav-link' onclick="showAdmin('empls')">Manage Employee</a></li>
        {{ if eq .user.ID 0 }}
        <li><a class='nav-link' onclick="showSuper('depts')">Manage Department</a></li>
        <li><a class='nav-link' onclick="showSuper('records')">Manage Records</a></li>
        {{ end }}
      </ul>
    </div>
    {{ end }}
  </div>
</nav>
{{ end }}
<div class='loading'>
  <div class='sk-wave sk-center'>
    <div class='sk-wave-rect'></div>
    <div class='sk-wave-rect'></div>
    <div class='sk-wave-rect'></div>
    <div class='sk-wave-rect'></div>
    <div class='sk-wave-rect'></div>
  </div>
</div>
<div class='content' {{ if .user }}style='padding-left: 200px;' {{ end }}>
  {{ template "content" . }}
</div>
<script>
  $('.toggle').click(() => {
    $('.sidebar').toggle('slide');
  });
  $('.content').click(() => {
    if ($('.sidebar').is(':visible') && $(window).width() <= 900) {
      $('.sidebar').toggle('slide');
    };
  });
</script>
